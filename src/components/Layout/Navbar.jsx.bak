/**
 * Componente Navbar
 * Barra de navegaci√≥n con usuario y opciones
 * Props:
 *   - user (object): Objeto usuario con name, email, avatar
 *   - onLogout (function): Callback al cerrar sesi√≥n
 *   - loading (boolean): Estado de carga
 */

import { useState } from "react";
import { useNavigate } from "react-router-dom";

export default function Navbar({ user = null, onLogout = () => {}, loading = false }) {
  const navigate = useNavigate();
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  const handleLogout = async () => {
    setIsMenuOpen(false);
    await onLogout();
    navigate("/login");
  };

  return (
    <nav className="bg-white shadow-md sticky top-0 z-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between items-center h-16">
          {/* Logo / Marca */}\n          <div className=\"flex items-center gap-8\">\n            <button\n              onClick={() => navigate(\"/dashboard\")}\n              className=\"flex items-center gap-2 text-xl font-bold text-blue-600 hover:text-blue-700 transition\"\n            >\n              ‚úì Gestor de Tareas\n            </button>\n\n            {/* Links de navegaci√≥n */}\n            <div className=\"hidden md:flex items-center gap-6\">\n              <button\n                onClick={() => navigate(\"/dashboard\")}\n                className=\"text-gray-600 hover:text-blue-600 transition font-medium\"\n              >\n                Dashboard\n              </button>\n              <button\n                onClick={() => navigate(\"/tasks\")}\n                className=\"text-gray-600 hover:text-blue-600 transition font-medium\"\n              >\n                Tareas\n              </button>\n              <button\n                onClick={() => navigate(\"/projects\")}\n                className=\"text-gray-600 hover:text-blue-600 transition font-medium\"\n              >\n                Proyectos\n              </button>\n            </div>\n          </div>\n\n          {/* Lado derecho - Usuario y men√∫ */}\n          <div className=\"flex items-center gap-4\">\n            {/* Usuario info */}\n            {user && (\n              <div className=\"hidden sm:flex items-center gap-3\">\n                <div className=\"text-right\">\n                  <p className=\"text-sm font-medium text-gray-900\">{user.name}</p>\n                  <p className=\"text-xs text-gray-500\">{user.email}</p>\n                </div>\n                <div className=\"w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm\">\n                  {user.name.charAt(0).toUpperCase()}\n                </div>\n              </div>\n            )}\n\n            {/* Men√∫ usuario */}\n            <div className=\"relative\">\n              <button\n                onClick={() => setIsMenuOpen(!isMenuOpen)}\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition\"\n                title=\"Men√∫\"\n              >\n                <svg\n                  className=\"w-6 h-6 text-gray-600\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M4 6h16M4 12h16M4 18h16\"\n                  />\n                </svg>\n              </button>\n\n              {/* Dropdown Menu */}\n              {isMenuOpen && (\n                <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg z-10 border border-gray-200\">\n                  {user && (\n                    <>\n                      <button\n                        onClick={() => {\n                          navigate(\"/profile\");\n                          setIsMenuOpen(false);\n                        }}\n                        className=\"w-full text-left px-4 py-2 hover:bg-gray-100 transition first:rounded-t-lg\"\n                      >\n                        üë§ Mi Perfil\n                      </button>\n                      <button\n                        onClick={() => {\n                          navigate(\"/settings\");\n                          setIsMenuOpen(false);\n                        }}\n                        className=\"w-full text-left px-4 py-2 hover:bg-gray-100 transition\"\n                      >\n                        ‚öôÔ∏è Configuraci√≥n\n                      </button>\n                      <button\n                        onClick={() => {\n                          navigate(\"/help\");\n                          setIsMenuOpen(false);\n                        }}\n                        className=\"w-full text-left px-4 py-2 hover:bg-gray-100 transition\"\n                      >\n                        ‚ùì Ayuda\n                      </button>\n                      <hr className=\"my-1\" />\n                    </>\n                  )}\n                  <button\n                    onClick={handleLogout}\n                    disabled={loading}\n                    className=\"w-full text-left px-4 py-2 hover:bg-red-50 text-red-600 transition last:rounded-b-lg disabled:opacity-50\"\n                  >\n                    üö™ {loading ? \"Cerrando...\" : \"Cerrar sesi√≥n\"}\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n}"